# Multi-Stage Implementation Plan — Coverage 98%

Date: 2025-10-31

P1 — High-Impact Tests (done in this pass)
- GhCreate CLI: conflicting flags, dot-directory name, CLI error (PATH shim)
- Diff: invalid args (non-numeric, two-arg modes), diff tool dual-failure path
- Info: ≥20 commits loop to exercise display index logic
- Cleanup: remove duplicate lib `main()`

P2 — Branch Coverage
- Tag: overwrite existing tag error; forced overwrite success (no-push)
- gh_push: branch exists pull path (covered), add explicit merge-conflict failure path
- is_dirty: rename/typechange detection; ensure EOL normalization branch executes
- read_version_from_cargo_toml: no file and malformed TOML
- remote_branch_exists: direct unit asserting true/false returns

P3 — Tooling + Gates
- Optional feature `offline_gh` to stub API fallback for offline tests
- Add Make target `coverage-llvm-lib` (`cargo llvm-cov --lib`) and a CI job with `--fail-under-lines=98`
- Documentation polish and CI stability tweaks (skip Windows-only assertions on Linux)

Exit Criteria
- `cargo llvm-cov` and Tarpaulin report ≥98% lines locally and in CI
- Stable, deterministic test runs (no networking)

