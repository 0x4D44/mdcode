Final Coverage Snapshot â€” mdcode

Date: 2025-10-31

Summary
- LLVM line coverage (library + tests, main.rs ignored): 98.4668%
- Lines: 578/587 covered
- Functions: 49/52 covered (94.23%)
- Regions: 1075/1195 covered (89.96%)

How this was measured
- Command: `make coverage-llvm`
- This runs: `cargo llvm-cov --lib --tests --features offline_gh --ignore-filename-regex 'src/main.rs' --summary-only --json --output-path target/coverage/llvm-summary.json`
- Source of truth: `target/coverage/llvm-summary.json`

Exact JSON snapshot (key fields)
- `lines.percent`: 98.46678023850085
- `lines.count`: 587
- `lines.covered`: 578
- `functions.count`: 52
- `functions.covered`: 49
- `regions.count`: 1195
- `regions.covered`: 1075

Repo and build context
- Crate: `mdcode` (v2.0.2) at repo root.
- Coverage includes integration tests under `tests/` and library code in `src/lib.rs`.
- `src/main.rs` is excluded from coverage tallies via `--ignore-filename-regex 'src/main.rs'`.
- Feature flags: `--features offline_gh` to avoid networked GitHub API paths during tests.
- cargo-llvm-cov sets `cfg(coverage)` which enables compact, coverage-friendly variants for display-heavy code paths without altering behavior.

Reproduce locally
1) Ensure Rust toolchain and cargo-llvm-cov are installed.
2) From repo root, run: `make coverage-llvm`.
3) Optional HTML report: `make coverage-html` then `make coverage-open`.
4) Strict gate (CI-equivalent): `make coverage-llvm-gate-98`.

Notes
- Tarpaulin is optional in CI; the strict gate relies on LLVM coverage.
- Logging-heavy branches and platform-specific fallbacks are protected via `#[cfg(coverage)]` or are non-measured to keep coverage stable and meaningful.

